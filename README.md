# 匿名掲示板「AnonBBS」

5ch風の匿名掲示板Webアプリケーションです。会員登録なしで誰でも自由にスレッドを立てたり、書き込みができます。

## ✨ 新機能（v2.0）

- ✅ **ライトモードUI**: モダンで見やすい白基調のデザイン
- ✅ **カテゴリ機能**: 雑談・ニュース・プログラミングの3カテゴリ
- ✅ **カテゴリフィルタ**: カテゴリごとにスレッドを絞り込み
- ✅ **画像添付**: スレッド・レス両方で画像アップロード可能
- ✅ **画像プレビュー**: 投稿前に画像をプレビュー表示
- ✅ **アニメーション**: Framer Motionによるスムーズな動き

## 🚀 機能

### 基本機能
- ✅ スレッド一覧表示
- ✅ 新規スレッド作成
- ✅ スレッド詳細表示
- ✅ レス（返信）投稿
- ✅ 匿名投稿（名前は任意）

### 新機能
- ✅ カテゴリ別スレッド管理
- ✅ 画像アップロード（JPEG、PNG、WEBP対応）
- ✅ カテゴリフィルタリング
- ✅ レスポンシブデザイン
- ✅ モダンなライトモードUI

## 📦 技術スタック

- **フロントエンド**: Next.js 14 (Pages Router), React 18, TypeScript
- **スタイリング**: Tailwind CSS, shadcn/ui
- **アニメーション**: Framer Motion
- **アイコン**: Lucide React
- **データ取得**: SWR
- **データベース**: JSONファイル
- **画像アップロード**: formidable

## 🛠️ セットアップ手順

### 前提条件

- Node.js 18.x 以上
- npm または yarn

### 1. 依存パッケージのインストール

プロジェクトディレクトリで以下のコマンドを実行：

\`\`\`bash
npm install
\`\`\`

### 2. 開発サーバーの起動

\`\`\`bash
npm run dev
\`\`\`

ブラウザで [http://localhost:3000](http://localhost:3000) を開いてアクセスしてください。

## 📁 プロジェクト構造

\`\`\`
.
├── components/
│   ├── layout/
│   │   └── MainLayout.tsx       # 共通レイアウト（ライトモード対応）
│   └── ui/                       # shadcn/ui コンポーネント
│       ├── button.tsx
│       ├── card.tsx
│       ├── input.tsx
│       ├── textarea.tsx
│       └── select.tsx           # 新規: カテゴリ選択用
├── lib/
│   ├── db.ts                    # JSONベースDB（カテゴリ・画像対応）
│   ├── types.ts                 # 型定義（Category型追加）
│   └── utils.ts                 # ユーティリティ関数
├── pages/
│   ├── api/
│   │   ├── threads/
│   │   │   └── index.ts         # スレッド一覧・作成API（カテゴリ対応）
│   │   ├── posts/
│   │   │   └── [threadId].ts    # 投稿一覧・作成API（画像対応）
│   │   └── upload.ts            # 新規: 画像アップロードAPI
│   ├── threads/
│   │   └── [id].tsx             # スレッド詳細ページ（画像表示対応）
│   ├── _app.tsx
│   ├── _document.tsx
│   └── index.tsx                # トップページ（カテゴリフィルタ追加）
├── public/
│   └── uploads/                 # 画像アップロード先（自動生成）
├── styles/
│   └── globals.css              # ライトモードスタイル
├── db.json                      # JSONデータベース（自動生成）
├── package.json
├── tsconfig.json
├── tailwind.config.js
└── README.md
\`\`\`

## 🗄️ データベース構造

JSONファイル（`db.json`）にデータが保存されます。

### Threadオブジェクト
\`\`\`typescript
{
  id: number;
  title: string;
  author: string;
  category: '雑談' | 'ニュース' | 'プログラミング';
  image_path?: string;  // 画像パス（任意）
  created_at: string;
}
\`\`\`

### Postオブジェクト
\`\`\`typescript
{
  id: number;
  thread_id: number;
  author: string;
  body: string;
  image_path?: string;  // 画像パス（任意）
  created_at: string;
}
\`\`\`

## 🎨 UIの特徴

### カラースキーム
- **ベース**: ホワイト・ブルー・インディゴのグラデーション
- **アクセント**: ブルー（#3B82F6）～インディゴ（#4F46E5）
- **カテゴリバッジ**: 
  - 雑談: グリーン
  - ニュース: ブルー
  - プログラミング: パープル

### アニメーション
- フェードイン・アウト
- スライド
- ホバーエフェクト
- スムーズな遷移

## 📝 使い方

### スレッドを作成
1. トップページ右側の「新規スレッド作成」フォーム
2. **カテゴリ**を選択（必須）
3. **スレッドタイトル**を入力（必須）
4. **名前**を入力（省略可）
5. **画像**を添付（省略可、最大5MB）
6. 「スレッドを立てる」ボタンをクリック

### レスを投稿
1. スレッド詳細ページを開く
2. 下部の「レスを書く」フォームに入力
3. **本文**を入力（必須）
4. **名前**を入力（省略可）
5. **画像**を添付（省略可、最大5MB）
6. 「投稿する」ボタンをクリック

### カテゴリでフィルタ
- トップページ上部のカテゴリボタンをクリック
- 選択したカテゴリのスレッドのみ表示

## 🖼️ 画像アップロード

### 対応フォーマット
- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)

### 制限
- 最大ファイルサイズ: 5MB
- 保存先: `public/uploads/`
- 自動リネーム: タイムスタンプベース

## 🔧 カスタマイズ

### カテゴリの変更

`lib/types.ts`で定義されている`CATEGORIES`配列を編集：

\`\`\`typescript
export const CATEGORIES: Category[] = ['雑談', 'ニュース', 'プログラミング'];
\`\`\`

### カラーテーマの変更

`styles/globals.css`の`:root`変数を編集：

\`\`\`css
:root {
  --primary: 221.2 83.2% 53.3%;  /* ブルー */
  /* 他の色も変更可能 */
}
\`\`\`

### 画像サイズ制限の変更

`pages/api/upload.ts`の設定を編集：

\`\`\`typescript
maxFileSize: 5 * 1024 * 1024, // 5MB
\`\`\`

## 🚀 今後の拡張予定

- [ ] 板（複数のカテゴリグループ）機能
- [ ] 管理者機能（削除・ロック・BAN）
- [ ] 検索機能
- [ ] ページネーション
- [ ] 通報機能
- [ ] NGワードフィルタ
- [ ] IP制限

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能リクエストは、Issuesで受け付けています。

---

**作成日**: 2024年  
**バージョン**: 2.0 - ライトモード・カテゴリ・画像対応版
